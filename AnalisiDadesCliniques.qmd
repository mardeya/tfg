---
title: "Anàlisi Dades Clíniques"
format: html
editor: visual
---

## Carregar la base de dades

```{r}
library(dplyr)
```


Primer de tot carregam la base de dades
```{r}
library(readxl)
clinical_data <- read_excel("clinical_data.xlsx")
str(clinical_data)
```

Primer de tot, farem una selecció de les variables que ens interessen:

```{r}
clinical_data2 <- clinical_data %>% 
  select(TCIA_ID, TTP, Death_1_StillAliveorLostToFU_0, Censored_0_progressed_1, OS, hepatitis, Sex, age, Smoking, Alcohol, fhx_can, fhx_livc, `Personal history of cancer`, Diabetes, Evidence_of_cirh, Lymphnodes, Metastasis, `Portal Vein Thrombosis`, Pathology, Tr_Size, tumor_nodul, T_involvment, AFP)
```

Convertim les variables qualitatives a factors:
```{r}
#attach(clinical_data2)
var_fact = c("Death_1_StillAliveorLostToFU_0", "Censored_0_progressed_1", "hepatitis"
             , "Sex", "Smoking", "Alcohol", "fhx_can", "fhx_livc", "Personal history of cancer",
             "Diabetes", "Evidence_of_cirh", "Lymphnodes", "Metastasis", "Portal Vein Thrombosis",
             "Pathology", "tumor_nodul", "T_involvment")

var_quant = c("TTP", "Tr_Size", "AFP")
clinical_data2[var_fact] <- lapply(clinical_data2[var_fact], as.integer)
str(clinical_data2)
```



```{r}
cor(na.omit(clinical_data2[var_quant]))
```


```{r}
f <- lm(OS ~.-TCIA_ID, data= clinical_data2)
summary(f)
```

```{r}
plot(f)
```

